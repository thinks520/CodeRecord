#/usr/bin/python
#-*- coding:utf-8 -*-

import paramiko

#创建SSH对象
ssh = paramiko.SSHClient()


if __name__ == "__main__":
    # 把要连接的机器添加到known_hosts文件中
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    # 连接服务器
    ssh.connect(hostname='192.168.25.131', port=22, username='root', password='123456',allow_agent=False,look_for_keys=False)
    cmd = 'top -b -n 1'
    # cmd = 'ls -l;ifconfig'       #多个命令用;隔开
    stdin, stdout, stderr = ssh.exec_command(cmd)
    result = stdout.read()
    if not result:
        result = stderr.read()
    ssh.close()
    print(result.decode())